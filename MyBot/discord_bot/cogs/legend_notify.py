import discord
from discord.ext import commands
import random

class LegendNotify(commands.Cog):
    def __init__(self, bot):
        self.bot = bot
        self.channel_id = 1313162310130339891  # <-- Ð¡Ð»Ð¾Ð¶Ð¸ ID Ð½Ð° ÐºÐ°Ð½Ð°Ð»Ð°
        self.target_id = 1036929405085290556   # <-- Ð¡Ð»Ð¾Ð¶Ð¸ ID Ð½Ð° Ñ‡Ð¾Ð²ÐµÐºÐ°

        self.messages = [
            "âš”ï¸ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð·Ð°Ð²ÑŠÑ€Ð½Ð° ÑÑ€ÐµÐ´ Ð½Ð°Ñ â€“ Ð³ÐµÑ€Ð¾Ð¸Ñ‚Ðµ Ñ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð°Ñ‚!",
            "ðŸ”¥ Ð’Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ Ð½Ð° Ð°Ð´Ð° ÑÐµ Ð·Ð°Ñ‚Ð²Ð°Ñ€ÑÑ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½!",
            "ðŸ’€ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð³Ð½Ð° â€“ Ð´ÐµÐ¼Ð¾Ð½Ð¸Ñ‚Ðµ Ð¾Ñ‚ÑÑ‚ÑŠÐ¿Ð²Ð°Ñ‚ Ð² Ð¿Ð°Ð½Ð¸ÐºÐ°!",
            "ðŸ—¡ Sanctuary ÑÐ¸ÑÐµ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾ Ñ‚ÑƒÐº!",
            "ðŸ† Ð•Ð´Ð¸Ð½ Ð²ÐµÐ»Ð¸Ðº Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½!",
            "âš¡ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð¿Ð¾ÑÐ²Ð¸ â€“ ÑÐ¸Ð»Ð°Ñ‚Ð° Ñ Ð¾Ð·Ð°Ñ€ÑÐ²Ð° ÑÐ²ÐµÑ‚Ð°!",
            "ðŸ‰ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð³Ð½Ð° â€“ Ð·Ð»Ð¾Ñ‚Ð¾ Ð½ÑÐ¼Ð° ÐºÑŠÐ´Ðµ Ð´Ð° ÑÐµ ÑÐºÑ€Ð¸Ðµ!",
            "ðŸ”® Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ñ‚ÑƒÐº â€“ Ð¼Ð°Ð³Ð¸ÑÑ‚Ð° Ð½Ð° Ð´Ñ€ÐµÐ²Ð½Ð¸Ñ‚Ðµ ÑÐ¸Ð»Ð¸ Ð¾Ð¶Ð¸Ð²ÑÐ²Ð°!",
            "ðŸ§™â€â™‚ï¸ Sanctuary Ð»Ð¸ÐºÑƒÐ²Ð° â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾ ÑÑ€ÐµÐ´ Ð³ÐµÑ€Ð¾Ð¸Ñ‚Ðµ!",
            "ðŸ—¡ Ð’ÐµÐ»Ð¸ÐºÐ¸ÑÑ‚ Ð¼Ð¸Ð³ Ð½Ð°ÑÑ‚ÑŠÐ¿Ð¸ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð·Ð°Ð²ÑŠÑ€Ð½Ð° Ð¾Ð½Ð»Ð°Ð¹Ð½!",
            "ðŸ”¥ ÐžÐ³Ð½ÑŒÐ¾Ð²ÐµÑ‚Ðµ Ð½Ð° Ð°Ð´Ð° Ð¿Ð»Ð°Ð¼Ð²Ð°Ñ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð² Ð¸Ð³Ñ€Ð°Ñ‚Ð°!",
            "âš”ï¸ Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð¿Ñ€Ð¾Ð±ÑƒÐ¶Ð´Ð° â€“ Ð²Ñ€Ð°Ð³Ð¾Ð²ÐµÑ‚Ðµ Ñ‚Ñ€ÐµÐ¿ÐµÑ€ÑÑ‚!",
            "ðŸ¹ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð¿Ð¾ÑÐ²Ð¸ â€“ ÑÑ‚Ñ€ÐµÐ»Ð¸Ñ‚Ðµ Ð½Ð° ÑÑŠÐ´Ð±Ð°Ñ‚Ð° ÑÐ° Ð³Ð¾Ñ‚Ð¾Ð²Ð¸!",
            "ðŸ›¡ Ð§ÑƒÐ¹Ñ‚Ðµ Ð·Ð²ÑƒÐºÐ° Ð½Ð° ÑÐ»Ð°Ð²Ð°Ñ‚Ð° â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð½Ð° Ð»Ð¸Ð½Ð¸Ñ!",
            "âš¡ Ð’ÑÐ¸Ñ‡ÐºÐ¸ Ð´ÐµÐ¼Ð¾Ð½Ð¸ Ð±ÑÐ³Ð°Ñ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð³Ð½Ð°!",
            "ðŸ”¥ Ð¡Ð²ÑÑ‚Ð°Ñ‚Ð° Ð·ÐµÐ¼Ñ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾ Ð¸Ð¼Ð° ÑÐ²Ð¾Ñ Ð³ÐµÑ€Ð¾Ð¹ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ñ‚ÑƒÐº!",
            "ðŸ’€ Ð“ÐµÑ€Ð¾Ð¸Ñ‚Ðµ Ð½Ð° Sanctuary Ð²Ð¸ÐºÐ°Ñ‚ Ð¸Ð¼ÐµÑ‚Ð¾ {mention} â€“ Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½!",
            "ðŸ—¡ Ð’ÑÐ¸Ñ‡ÐºÐ¸ Ñ‚ÑŠÑ€Ð³Ð¾Ð²Ñ†Ð¸ Ð¿Ð¾Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ Ñ€ÑŠÑ†Ðµ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð³Ð½Ð°Ð»Ð°!",
            "âš”ï¸ Ð—Ð»Ð¾Ñ‚Ð¾ ÑÐµ ÐºÑ€Ð¸Ðµ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð¿Ð¾ÑÐ²Ð¸ Ð½Ð° Ñ…Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°!",
            "ðŸ† ÐŸÐ¾Ñ€ÐµÐ´Ð½Ð¸ÑÑ‚ Ð²ÐµÐ»Ð¸Ðº Ð´ÐµÐ½ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ñ‚ÑƒÐº!",
            "ðŸ”® Ð’ÑÐ¸Ñ‡ÐºÐ¸ Ñ€ÑƒÐ½Ð½Ð¸ Ð´ÑƒÐ¼Ð¸ Ñ‚Ñ€ÐµÐ¿Ñ‚ÑÑ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½!",
            "ðŸ›¡ Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾ Ð² Sanctuary â€“ ÑÑŠÑŽÐ·Ð½Ð¸Ñ†Ð¸Ñ‚Ðµ Ð»Ð¸ÐºÑƒÐ²Ð°Ñ‚!",
            "âš¡ Ð¡Ð¸Ð»Ð°Ñ‚Ð° Ð½Ð° Ð´Ñ€ÐµÐ²Ð½Ð¸Ñ‚Ðµ Ð³ÐµÑ€Ð¾Ð¸ Ð¾Ð¶Ð¸Ð²ÑÐ²Ð° â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð½Ð° Ð»Ð¸Ð½Ð¸Ñ!",
            "ðŸ‰ Ð“ÐµÑ€Ð¾Ð¸Ñ‚Ðµ Ð¿Ð¾Ñ‚Ñ€ÑŠÐ¿Ð²Ð°Ñ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð·Ð°Ð²ÑŠÑ€Ð½Ð°!",
            "ðŸ”¥ Ð’ÑÐ¸Ñ‡ÐºÐ¸ Ð¿ÑŠÑ‚Ð¸Ñ‰Ð° Ð²Ð¾Ð´ÑÑ‚ ÐºÑŠÐ¼ ÑÐ»Ð°Ð²Ð°Ñ‚Ð° â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½!",
            "ðŸ¹ ÐžÑ€ÑŠÐ¶Ð¸ÑÑ‚Ð° ÑÐ° Ð³Ð¾Ñ‚Ð¾Ð²Ð¸ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ ÑÑ€ÐµÐ´ Ð½Ð°Ñ!",
            "ðŸ’€ Ð”ÐµÐ¼Ð¾Ð½Ð¸Ñ‚Ðµ ÑÐµ Ñ€Ð°Ð·Ð±ÑÐ³Ð²Ð°Ñ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ñ‚ÑƒÐº!",
            "âš”ï¸ ÐÐ¾Ð²Ð¸ Ð¿Ñ€Ð¸ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð¾ÑÑ‚ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð¿Ð¾ÑÐ²Ð¸!",
            "ðŸ—¡ ÐžÑ‚Ð½Ð¾Ð²Ð¾ Ñ‰Ðµ Ð¸Ð¼Ð° Ð±Ð¸Ñ‚ÐºÐ¸ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} ÑÐµ Ð·Ð°Ð²ÑŠÑ€Ð½Ð°!",
            "ðŸ† Sanctuary Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð° Ð³ÐµÑ€Ð¾Ñ â€“ Diablo II Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ‚Ð° {mention} Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½!"
        ]

        self.last_status = None  # Ñ‰Ðµ Ð¿Ð°Ð·Ð¸Ð¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑ

    @commands.Cog.listener()
    async def on_presence_update(self, before, after):
        if after.id != self.target_id:
            return  # Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÐ²Ð° Ð½Ð¸ ÑÐ°Ð¼Ð¾ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¸ÑÑ‚ Ñ‡Ð¾Ð²ÐµÐº

        current_status = str(after.status)

        if current_status == "offline":
            self.last_status = "offline"
            return

        # ÐÐºÐ¾ Ð¿Ñ€ÐµÐ´Ð¸ Ðµ Ð±Ð¸Ð» offline, Ð° ÑÐµÐ³Ð° Ð²ÐµÑ‡Ðµ Ðµ online/idle/dnd
        if self.last_status == "offline":
            channel = self.bot.get_channel(self.channel_id)
            if channel:
                msg = random.choice(self.messages).format(mention=after.mention)
                await channel.send(msg)

        self.last_status = current_status

async def setup(bot):
    await bot.add_cog(LegendNotify(bot))

